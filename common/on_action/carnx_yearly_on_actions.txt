# Called from code once a year for "playable" (count+) characters.
# Root is the character
yearly_playable_pulse = {
	events = {
		carnx_slave.0004 # Piety Loss From Slaves
	}

	random_events = {
		200 = 0
		 50 = carnx_slave.0010 # Slave Converts to Your Faith
	}

	on_actions = {
		delay = { days = { 8 288 } }
		carnx_yearly_playable_pulse
	}
}

carnx_yearly_playable_pulse = {
	trigger = {
		basic_is_valid_for_yearly_events_trigger = yes
	}

	events = {
		carnx_slave.0002 # Sex With a Slave
	}

	random_events = {
		chance_of_no_event = {
			value = 0
			if = {
				limit = { is_at_war = yes }
				add = 50
			}
			if = {
				limit = {
					is_ai = yes
					highest_held_title_tier < tier_duchy
				}
				add = 50
			}
		}

		200 = 0

		 20 = carnx_slave.0003 # Runaway Slave
		100 = carnx_slave.0005 # Freedom for a Slave
		100 = carnx_slave.0009 # The Price of Freedom
		100 = carnx_slave.0011 # The Informant's Bargain
	}
}

# Called every Jan 1st
# Root does not exist
yearly_global_pulse = {
	on_actions = { carnx_yearly_stats }
}

carnx_yearly_stats = {
	#trigger = { debug_only = yes }

	effect = {
		carnx_debug_log_effect = { MSG = carnx_debug_msg_stats }
		error_log = carnx_debug_msg_stats
	}
}