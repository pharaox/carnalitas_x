carnx_court_physician_total_salary_value = {
	value = court_physician_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = court_physician_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_court_gardener_total_salary_value = {
	value = court_gardener_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = court_gardener_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_antiquarian_total_salary_value = {
	value = antiquarian_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = antiquarian_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_wet_nurse_total_salary_value = {
	value = wet_nurse_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = wet_nurse_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_court_tutor_total_salary_value = {
	value = court_tutor_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = court_tutor_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_food_taster_total_salary_value = {
	value = food_taster_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = food_taster_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_seneschal_total_salary_value = {
	value = seneschal_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = seneschal_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_chief_eunuch_total_salary_value = {
	value = chief_eunuch_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = chief_eunuch_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_court_jester_total_salary_value = {
	value = court_jester_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = court_jester_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_court_poet_total_salary_value = {
	value = court_poet_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = court_poet_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_court_musician_total_salary_value = {
	value = court_musician_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = court_musician_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_bodyguard_total_salary_value = {
	value = bodyguard_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = bodyguard_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_champion_total_salary_value = {
	value = champion_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = champion_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_master_assassin_total_salary_value = {
	value = master_assassin_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = master_assassin_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_chronicler_total_salary_value = {
	value = chronicler_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = chronicler_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_court_brewmaster_total_salary_value = {
	value = court_brewmaster_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = court_brewmaster_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_boyan_total_salary_value = {
	value = boyan_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = boyan_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_siege_engineer_total_salary_value = {
	value = siege_engineer_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = siege_engineer_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_yurtchi_total_salary_value = {
	value = yurtchi_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = yurtchi_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_cherbi_total_salary_value = {
	value = cherbi_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = cherbi_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_foreign_emissary_total_salary_value = {
	value = foreign_emissary_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = foreign_emissary_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_keeper_of_the_horses_total_salary_value = {
	value = keeper_of_the_horses_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = keeper_of_the_horses_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_keeper_of_the_harem_total_salary_value = {
	value = keeper_of_the_harem_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = keeper_of_the_harem_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_khlon_glan_total_salary_value = {
	value = khlon_glan_total_salary_value
	if = {
		limit = {
			scope:liege = {
				carnx_employs_slave_as_court_position_trigger = { TYPE = khlon_glan_court_position }
			}
		}
		multiply = carnx_court_position_salary_slave_multiplier
	}
}

carnx_slave_concubine_total_salary_value = {
	add = {
		value = 0.1
		desc = COURT_POSITION_SALARY_BREAKDOWN_BASE
		format = "BASE_VALUE_FORMAT_DECIMALS"
	}
	multiply = carnx_court_position_salary_liege_multiplier
	multiply = carnx_court_position_salary_slave_multiplier

	# Set to 0 with Dynasty Perk Inner Circle
	if = {
		limit = { court_position_inner_circle_salary_trigger = { POS = carnx_slave_concubine } }
		multiply = {
			value = 0
			desc = inner_circle_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved with obligation hook
	else_if = {
		limit = {
			court_position_obligation_hook_salary_trigger = {
				POS = carnx_slave_concubine
				LIEGE = scope:liege
			}
		}
		multiply = {
			value = 0.5
			desc = obligation_hook_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved salary
	if = {
		limit = {
			court_position_halved_salary_trigger = { POS = carnx_slave_concubine }
		}
		multiply = {
			value = 0.5
			desc = court_position_halved_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Increased salary
	if = {
		limit = {
			court_position_increased_salary_trigger = { POS = carnx_slave_concubine }
		}
		multiply = {
			value = 1.5
			desc = court_position_increased_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	#You're working with LAAMPS now
	if = {
		limit = { 
			scope:liege ?= { government_has_flag = government_is_landless_adventurer }
		}
		multiply = {
			value = 0
			desc = court_position_laamps_free
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
}

carnx_slave_captain_total_salary_value = {
	add = {
		value = 0.3
		desc = COURT_POSITION_SALARY_BREAKDOWN_BASE
		format = "BASE_VALUE_FORMAT_DECIMALS"
	}
	multiply = carnx_court_position_salary_liege_multiplier
	multiply = carnx_court_position_salary_slave_multiplier

	# Set to 0 with Dynasty Perk Inner Circle
	if = {
		limit = { court_position_inner_circle_salary_trigger = { POS = carnx_slave_captain } }
		multiply = {
			value = 0
			desc = inner_circle_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved with obligation hook
	else_if = {
		limit = {
			court_position_obligation_hook_salary_trigger = {
				POS = carnx_slave_captain
				LIEGE = scope:liege
			}
		}
		multiply = {
			value = 0.5
			desc = obligation_hook_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved salary
	if = {
		limit = {
			court_position_halved_salary_trigger = { POS = carnx_slave_captain }
		}
		multiply = {
			value = 0.5
			desc = court_position_halved_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Increased salary
	if = {
		limit = {
			court_position_increased_salary_trigger = { POS = carnx_slave_captain }
		}
		multiply = {
			value = 1.5
			desc = court_position_increased_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	#You're working with LAAMPS now
	if = {
		limit = { 
			scope:liege ?= { government_has_flag = government_is_landless_adventurer }
		}
		multiply = {
			value = 0
			desc = court_position_laamps_free
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
}

carnx_slave_eunuch_total_salary_value = {
	add = {
		value = 0.3
		desc = COURT_POSITION_SALARY_BREAKDOWN_BASE
		format = "BASE_VALUE_FORMAT_DECIMALS"
	}
	multiply = carnx_court_position_salary_liege_multiplier
	multiply = carnx_court_position_salary_slave_multiplier

	# Set to 0 with Dynasty Perk Inner Circle
	if = {
		limit = { court_position_inner_circle_salary_trigger = { POS = carnx_slave_eunuch } }
		multiply = {
			value = 0
			desc = inner_circle_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved with obligation hook
	else_if = {
		limit = {
			court_position_obligation_hook_salary_trigger = {
				POS = carnx_slave_eunuch
				LIEGE = scope:liege
			}
		}
		multiply = {
			value = 0.5
			desc = obligation_hook_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved salary
	if = {
		limit = {
			court_position_halved_salary_trigger = { POS = carnx_slave_eunuch }
		}
		multiply = {
			value = 0.5
			desc = court_position_halved_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Increased salary
	if = {
		limit = {
			court_position_increased_salary_trigger = { POS = carnx_slave_eunuch }
		}
		multiply = {
			value = 1.5
			desc = court_position_increased_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	#You're working with LAAMPS now
	if = {
		limit = { 
			scope:liege ?= { government_has_flag = government_is_landless_adventurer }
		}
		multiply = {
			value = 0
			desc = court_position_laamps_free
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
}

carnx_slave_concubine_prestige_salary_value = {
	value = minor_court_position_prestige_salary

	# Set to 0 with Dynasty Perk Inner Circle
	if = {
		limit = { court_position_inner_circle_salary_trigger = { POS = carnx_slave_concubine } }
		multiply = {
			value = 0
			desc = inner_circle_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved with obligation hook
	else_if = {
		limit = {
			court_position_obligation_hook_salary_trigger = {
				POS = carnx_slave_concubine
				LIEGE = scope:liege
			}
		}
		multiply = {
			value = 0.5
			desc = obligation_hook_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved salary
	if = {
		limit = {
			court_position_halved_salary_trigger = { POS = carnx_slave_concubine }
		}
		multiply = {
			value = 0.5
			desc = court_position_halved_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Increased salary
	if = {
		limit = {
			court_position_increased_salary_trigger = { POS = carnx_slave_concubine }
		}
		multiply = {
			value = 1.5
			desc = court_position_increased_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	#You're working with LAAMPS now
	if = {
		limit = { 
			scope:liege ?= { government_has_flag = government_is_landless_adventurer }
		}
		multiply = {
			value = 0
			desc = court_position_laamps_free
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
}

carnx_slave_captain_prestige_salary_value = {
	value = minor_court_position_prestige_salary

	# Set to 0 with Dynasty Perk Inner Circle
	if = {
		limit = { court_position_inner_circle_salary_trigger = { POS = carnx_slave_captain } }
		multiply = {
			value = 0
			desc = inner_circle_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved with obligation hook
	else_if = {
		limit = {
			court_position_obligation_hook_salary_trigger = {
				POS = carnx_slave_captain
				LIEGE = scope:liege
			}
		}
		multiply = {
			value = 0.5
			desc = obligation_hook_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved salary
	if = {
		limit = {
			court_position_halved_salary_trigger = { POS = carnx_slave_captain }
		}
		multiply = {
			value = 0.5
			desc = court_position_halved_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Increased salary
	if = {
		limit = {
			court_position_increased_salary_trigger = { POS = carnx_slave_captain }
		}
		multiply = {
			value = 1.5
			desc = court_position_increased_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	#You're working with LAAMPS now
	if = {
		limit = { 
			scope:liege ?= { government_has_flag = government_is_landless_adventurer }
		}
		multiply = {
			value = 0
			desc = court_position_laamps_free
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
}

carnx_slave_eunuch_prestige_salary_value = {
	value = minor_court_position_prestige_salary

	# Set to 0 with Dynasty Perk Inner Circle
	if = {
		limit = { court_position_inner_circle_salary_trigger = { POS = carnx_slave_eunuch } }
		multiply = {
			value = 0
			desc = inner_circle_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved with obligation hook
	else_if = {
		limit = {
			court_position_obligation_hook_salary_trigger = {
				POS = carnx_slave_eunuch
				LIEGE = scope:liege
			}
		}
		multiply = {
			value = 0.5
			desc = obligation_hook_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Halved salary
	if = {
		limit = {
			court_position_halved_salary_trigger = { POS = carnx_slave_eunuch }
		}
		multiply = {
			value = 0.5
			desc = court_position_halved_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# Increased salary
	if = {
		limit = {
			court_position_increased_salary_trigger = { POS = carnx_slave_eunuch }
		}
		multiply = {
			value = 1.5
			desc = court_position_increased_salary
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	#You're working with LAAMPS now
	if = {
		limit = { 
			scope:liege ?= { government_has_flag = government_is_landless_adventurer }
		}
		multiply = {
			value = 0
			desc = court_position_laamps_free
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
}

carnx_court_position_salary_slave_multiplier = {
	value = 1
	if = {
		limit = {
			scope:liege = {
				has_character_modifier = carnx_slavery_attitude_employer_modifier
			}
		}
		multiply = {
			value = carnx_court_position_salary_slave_employer_multiplier
			desc = carnx_slave_salary_employer_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	else = {
		multiply = {
			value = carnx_court_position_salary_slave_regular_multiplier
			desc = carnx_slave_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
}

carnx_court_position_salary_liege_multiplier = {
	value = 1
	if = {
		limit = {
			scope:liege.sub_realm_size >= 120
		}
		multiply = {
			value = 1.6
			desc = enormous_realm_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
		}
	}
	else_if = {
		limit = {
			scope:liege.sub_realm_size >= 90
		}
		multiply = {
			value = 1.4
			desc = large_realm_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
		}
	}
	else_if = {
		limit = {
			scope:liege.sub_realm_size >= 60
		}
		multiply = {
			value = 1.2
			desc = medium_realm_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
		}
	}
	else_if = {
		limit = {
			scope:liege.sub_realm_size >= 30
		}
		multiply =  {
			value =  1.1
			desc = small_realm_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
		}
	}
	if = {
		limit = {
			scope:liege = {
				culture = {
					has_cultural_era_or_later = culture_era_late_medieval
				}
			}
		}
		multiply =  {
			value =  1.75
			desc = culture_era_late_medieval_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
		}
	}
	else_if = {
		limit = {
			scope:liege = {
				culture = {
					has_cultural_era_or_later = culture_era_high_medieval
				}
			}
		}
		multiply = {
			value = 1.5
			desc = culture_era_high_medieval_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
		}
	}
	else_if = {
		limit = {
			scope:liege = {
				culture = {
					has_cultural_era_or_later = culture_era_early_medieval
				}
			}
		}
		multiply = {
			value = 1.25
			desc = culture_era_early_medieval_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
		}
	}
	if = {
		limit = {
			scope:liege = {
				highest_held_title_tier >= tier_empire
			}
		}
		multiply = {
			value = 1.25
			desc = empire_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
		}
	}
	if = {
		limit = {
			scope:liege = {
				government_has_flag = government_is_tribal
			}
		}
		multiply = {
			value = 0.25
			desc = tribal_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	if = {
		limit = {
			scope:liege = {
				government_has_flag = government_is_nomadic
			}
		}
		multiply = {
			value = 0.5
			desc = nomad_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	if = {
		limit = {
			scope:liege = {
				culture = {
					has_cultural_parameter = cheaper_court_positions
				}
			}
		}
		multiply = {
			value = 0.8
			desc = esteemed_hospitality_salary_mod
			format = "BASE_VALUE_FORMAT_DECIMALS_MINUS_POSITIVE"
		}
	}
	# TGP parameters
	if = {
		limit = {
			scope:liege = {
				has_title = title:h_china
				top_participant_group:dynastic_cycle ?= { has_participant_group_parameter = dynastic_cycle_hegemony_higher_court_position_salaries }
			}
		}
		multiply = {
			value = {
				value = 1
				add = dynastic_cycle_hegemony_higher_court_position_salaries_value
			}
			desc = dynastic_cycle_hegemony_higher_court_position_salaries_desc
			format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
		} 
	}
	if = {
		limit = {
			OR = {
				has_game_rule = hard_difficulty
				has_game_rule = very_hard_difficulty
			}
			scope:liege = {
				is_ai = yes
			}
		}
		multiply = 0
	}
}

carnx_regular_court_position_opinion = {
	value = regular_court_position_opinion
	multiply = carnx_court_position_opinion_slave_multiplier
}

carnx_ceremonial_court_position_opinion = {
	value = ceremonial_court_position_opinion
	multiply = carnx_court_position_opinion_slave_multiplier
}

carnx_court_jester_position_opinion = {
	value = court_jester_position_opinion
	multiply = carnx_court_position_opinion_slave_multiplier
}

carnx_court_position_opinion_slave_multiplier = {
	value = 1
	if = {
		limit = {
			scope:employee = {
				carnx_is_slave_trigger = yes
			}
		}
		multiply = 3
		if = {
			limit = {
				scope:liege = {
					carnx_is_employed_slaves_more_loyal_enabled_trigger = yes
				}
			}
			multiply = 2
		}
	}
}

carnx_court_position_candidate_slave_value = {
	if = {
		limit = {
			scope:employee = {
				carnx_is_slave_trigger = yes
			}
		}
		add = 25
		if = {
			limit = {
				scope:liege = {
					carnx_is_employed_slaves_more_loyal_enabled_trigger = yes
				}
			}
			add = 25
		}
	}
}

carnx_number_of_desired_bodyguards = {
	value = 1
	if = {
		limit = { has_trait = paranoid }
		add = 1
	}
}

carnx_number_of_desired_champions = {
	value = 0.5
	if = {
		limit = {
			NOT = { can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = this } }
		}
		add = 1
	}
	if = {
		limit = { prowess >= high_skill_rating }
		add = -0.5
	}
	floor = yes
}

carnx_number_of_desired_slave_concubines = {
	value = 3
	if = {
		limit = { highest_held_title_tier >= tier_duchy }
		add = 1
	}
	if = {
		limit = { highest_held_title_tier >= tier_kingdom }
		add = 1
	}
	if = {
		limit = { has_trait = lustful }
		add = 1
	}
	else_if = {
		limit = { has_trait = chaste }
		add = -1
	}
	max = 5
}

carnx_number_of_desired_slave_captains = {
	value = 1
	if = {
		limit = { highest_held_title_tier >= tier_duchy }
		add = 1
	}
	if = {
		limit = { highest_held_title_tier >= tier_kingdom }
		add = 1
	}
}

carnx_number_of_desired_slave_eunuchs = {
	value = 1
	if = {
		limit = { highest_held_title_tier >= tier_duchy }
		add = 1
	}
	if = {
		limit = { highest_held_title_tier >= tier_kingdom }
		add = 1
	}
}

carnx_court_physician_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_court_physician_trigger = { RULER = scope:liege }
		}
		value = aptitude:court_physician_court_position
		subtract = carnx_court_physician_aptitude_threshold
	}
}

carnx_antiquarian_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_antiquarian_trigger = { RULER = scope:liege }
		}
		value = aptitude:antiquarian_court_position
		subtract = carnx_antiquarian_aptitude_threshold
	}
}

carnx_court_gardener_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_court_gardener_trigger = { RULER = scope:liege }
		}
		value = aptitude:court_gardener_court_position
		subtract = carnx_court_gardener_aptitude_threshold
	}
}

carnx_wet_nurse_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_wet_nurse_trigger = { RULER = scope:liege }
		}
		value = aptitude:wet_nurse_court_position
		subtract = carnx_wet_nurse_aptitude_threshold
	}
}

carnx_court_tutor_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_court_tutor_trigger = { RULER = scope:liege }
		}
		value = aptitude:court_tutor_court_position
		subtract = carnx_court_tutor_aptitude_threshold
	}
}

carnx_food_taster_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_food_taster_trigger = { RULER = scope:liege }
		}
		value = aptitude:food_taster_court_position
		subtract = carnx_food_taster_aptitude_threshold
	}
}

carnx_seneschal_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_seneschal_trigger = { RULER = scope:liege }
		}
		value = aptitude:seneschal_court_position
		subtract = carnx_seneschal_aptitude_threshold
	}
}

carnx_cupbearer_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_cupbearer_trigger = { RULER = scope:liege }
		}
		value = aptitude:cupbearer_court_position
		subtract = carnx_cupbearer_aptitude_threshold
	}
}

carnx_chief_eunuch_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_chief_eunuch_trigger = { RULER = scope:liege }
		}
		value = aptitude:chief_eunuch_court_position
		subtract = carnx_chief_eunuch_aptitude_threshold
	}
}

carnx_court_jester_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_court_jester_trigger = { RULER = scope:liege }
		}
		value = aptitude:court_jester_court_position
		subtract = carnx_court_jester_aptitude_threshold
	}
}

carnx_court_poet_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_court_poet_trigger = { RULER = scope:liege }
		}
		value = aptitude:court_poet_court_position
		subtract = carnx_court_poet_aptitude_threshold
	}
}

carnx_court_musician_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_court_musician_trigger = { RULER = scope:liege }
		}
		value = aptitude:court_musician_court_position
		subtract = carnx_court_musician_aptitude_threshold
	}
}

carnx_bodyguard_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_bodyguard_trigger = { RULER = scope:liege }
		}
		value = aptitude:bodyguard_court_position
		subtract = carnx_bodyguard_aptitude_threshold
	}
}

carnx_champion_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_champion_trigger = { RULER = scope:liege }
		}
		value = aptitude:champion_court_position
		subtract = carnx_champion_aptitude_threshold
	}
}

carnx_executioner_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_executioner_trigger = { RULER = scope:liege }
		}
		value = aptitude:executioner_court_position
		subtract = carnx_executioner_aptitude_threshold
	}
}

carnx_master_assassin_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_master_assassin_trigger = { RULER = scope:liege }
		}
		value = aptitude:master_assassin_court_position
		subtract = carnx_master_assassin_aptitude_threshold
	}
}

carnx_chronicler_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_chronicler_trigger = { RULER = scope:liege }
		}
		value = aptitude:chronicler_court_position
		subtract = carnx_chronicler_aptitude_threshold
	}
}

carnx_court_brewmaster_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_court_brewmaster_trigger = { RULER = scope:liege }
		}
		value = aptitude:court_brewmaster_court_position
		subtract = carnx_court_brewmaster_aptitude_threshold
	}
}

carnx_boyan_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_boyan_trigger = { RULER = scope:liege }
		}
		value = aptitude:boyan_court_position
		subtract = carnx_boyan_aptitude_threshold
	}
}

carnx_siege_engineer_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_siege_engineer_trigger = { RULER = scope:liege }
		}
		value = aptitude:siege_engineer_court_position
		subtract = carnx_siege_engineer_aptitude_threshold
	}
}

carnx_yurtchi_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_yurtchi_trigger = { RULER = scope:liege }
		}
		value = aptitude:yurtchi_court_position
		subtract = carnx_yurtchi_aptitude_threshold
	}
}

carnx_cherbi_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_cherbi_trigger = { RULER = scope:liege }
		}
		value = aptitude:cherbi_court_position
		subtract = carnx_cherbi_aptitude_threshold
	}
}

carnx_foreign_emissary_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_foreign_emissary_trigger = { RULER = scope:liege }
		}
		value = aptitude:foreign_emissary_court_position
		subtract = carnx_foreign_emissary_aptitude_threshold
	}
}

carnx_keeper_of_the_horses_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_keeper_of_the_horses_trigger = { RULER = scope:liege }
		}
		value = aptitude:keeper_of_the_horses_court_position
		subtract = carnx_keeper_of_the_horses_aptitude_threshold
	}
}

carnx_keeper_of_the_harem_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_keeper_of_the_harem_trigger = { RULER = scope:liege }
		}
		value = aptitude:keeper_of_the_harem_court_position
		subtract = carnx_keeper_of_the_harem_aptitude_threshold
	}
}

carnx_khlon_glan_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_khlon_glan_trigger = { RULER = scope:liege }
		}
		value = aptitude:khlon_glan_court_position
		subtract = carnx_khlon_glan_aptitude_threshold
	}
}

carnx_slave_concubine_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_slave_concubine_trigger = { RULER = scope:liege }
		}
		value = aptitude:carnx_slave_concubine_court_position
		subtract = carnx_slave_concubine_aptitude_threshold
	}
}

carnx_slave_captain_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_slave_captain_trigger = { RULER = scope:liege }
		}
		value = aptitude:carnx_slave_captain_court_position
		subtract = carnx_slave_captain_aptitude_threshold
	}
}

carnx_slave_eunuch_aptitude_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_slave_eunuch_trigger = { RULER = scope:liege }
		}
		value = aptitude:carnx_slave_eunuch_court_position
		subtract = carnx_slave_eunuch_aptitude_threshold
	}
}

carnx_vanilla_max_aptitude_difference_value = {
	value = 0
	min = {
		value = carnx_court_physician_aptitude_difference_value
		min = {
			value = carnx_antiquarian_aptitude_difference_value
			min = {
				value = carnx_court_gardener_aptitude_difference_value
				min = {
					value = carnx_wet_nurse_aptitude_difference_value
					min = {
						value = carnx_court_tutor_aptitude_difference_value
						min = {
							value = carnx_food_taster_aptitude_difference_value
							min = {
								value = carnx_seneschal_aptitude_difference_value
								min = {
									value = carnx_cupbearer_aptitude_difference_value
									min = {
										value = carnx_chief_eunuch_aptitude_difference_value
										min = {
											value = carnx_court_jester_aptitude_difference_value
											min = {
												value = carnx_court_poet_aptitude_difference_value
												min = {
													value = carnx_court_musician_aptitude_difference_value
													min = {
														value = carnx_bodyguard_aptitude_difference_value
														min = {
															value = carnx_champion_aptitude_difference_value
															min = {
																value = carnx_executioner_aptitude_difference_value
																min = {
																	value = carnx_master_assassin_aptitude_difference_value
																	min = {
																		value = carnx_chronicler_aptitude_difference_value
																		min = {
																			value = carnx_court_brewmaster_aptitude_difference_value
																			min = {
																				value = carnx_boyan_aptitude_difference_value
																				min = {
																					value = carnx_siege_engineer_aptitude_difference_value
																					min = {
																						value = carnx_yurtchi_aptitude_difference_value
																						min = {
																							value = carnx_cherbi_aptitude_difference_value
																							min = {
																								value = carnx_foreign_emissary_aptitude_difference_value
																								min = {
																									value = carnx_keeper_of_the_horses_aptitude_difference_value
																									min = {
																										value = carnx_keeper_of_the_harem_aptitude_difference_value
																										min = {
																											value = carnx_khlon_glan_aptitude_difference_value
																											min = {
																												value = carnx_slave_concubine_aptitude_difference_value
																												min = {
																													value = carnx_slave_captain_aptitude_difference_value
																													min = {
																														value = carnx_slave_eunuch_aptitude_difference_value
																													}
																												}
																											}
																										}
																									}
																								}
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

carnx_max_aptitude_difference_value = {
	value = carnx_vanilla_max_aptitude_difference_value
}

carnx_knight_skill_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_knight_trigger = { RULER = scope:liege }
		}
		value = prowess
		subtract = carnx_default_skill_threshold
	}
}

carnx_commander_skill_difference_value = {
	value = 0
	if = {
		limit = {
			carnx_can_serve_as_commander_trigger = { RULER = scope:liege }
		}
		value = carnx_commander_skill_value
	}
}

carnx_genetic_character_value = {
	value = genetic_character_value
}

carnx_vanilla_court_position_traits_character_value = {
	value = 0
	if = {
		limit = { # 50 (or prerequisite)
			OR = {
				is_eunuch_trigger = yes # Chief Eunuch, Court Eunuch
				has_trait = lifestyle_poet # Court Poet
			}
		}
		add = 5
	}
	else_if = {
		limit = { # 40
			OR = {
				carnx_has_tiered_trait_xp_trigger = { TRAIT = lifestyle_physician XP = 100 } # Court Physician
			}
		}
		add = 4
	}
	else_if = {
		limit = { # 30
			OR = {
				carnx_has_tiered_trait_xp_trigger = { TRAIT = lifestyle_blademaster XP = 100 } # Bodyguard, Champion
				has_completed_inspiration = yes # Antiquarian
			}
		}
		add = 3
	}
	else_if = { # 15-20
		limit = {
			OR = {
				carnx_has_tiered_trait_xp_trigger = { TRAIT = lifestyle_physician XP = 50 } # Court Physician
				carnx_has_tiered_trait_xp_trigger = { TRAIT = lifestyle_mystic XP = 100 } # Court Physician
				has_trait = shrewd # Court Jester, Court Tutor
				has_trait = lifestyle_gardener # Court Gardener
				has_trait = administrator # Seneschal
				has_trait = overseer # Seneschal
				has_trait = shieldmaiden # Champion
				carnx_has_tiered_trait_xp_trigger = { TRAIT = lifestyle_blademaster XP = 50 } # Bodyguard, Champion
				has_trait = lifestyle_herbalist # Food Taster, Court Physician
				has_trait = comfort_eater # Food Taster
			}
		}
		add = 2
	}
	else_if = { # 10
		limit = {
			OR = {
				has_trait = lifestyle_physician # Court Physician
				carnx_has_tiered_trait_xp_trigger = { TRAIT = lifestyle_mystic XP = 50 } # Court Physician
				has_trait = athletic # Court Jester
			}
		}
		add = 1
	}
}

carnx_court_position_traits_character_value = {
	value = carnx_vanilla_court_position_traits_character_value
}